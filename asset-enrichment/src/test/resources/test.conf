include "base-test.conf"

job {
  env = "sunbirddev"
}

kafka {
  input.topic = "sunbirddev.learning.job.request"
  groupId = "sunbirddev-asset-enrichment-group"
  video_stream.topic = "sunbirddev.content.postpublish.request"
}

task {
  consumer.parallelism = 1
  router.parallelism = 1
  videoEnrichment.parallelism = 1
  imageEnrichment.parallelism = 1
}

content {
  stream {
    enabled = true
    mimeType = ["video/mp4", "video/webm"]
  }
  youtube {
    applicationName = "fetch-youtube-license"
    regexPattern = ["\\?vi?=([^&]*)", "watch\\?.*v=([^&]*)", "(?:embed|vi?)/([^/?]*)", "^([A-Za-z0-9\\-\\_]*)"]
  }
  upload.context.driven = true
}

thumbnail.max {
  sample = 5
  size.pixel = 150
}

schema {
  base_path = ${?SCHEMA_BASE_PATH}
  supportedVersion = {"itemset": "2.0"}
}

blob {
  input {
    contentImagePath = ${?BLOB_IMAGE_CONTENT_PATH}
    contentVideoPath = ${?BLOB_VIDEO_CONTENT_PATH}
  }
}

cloudstorage.metadata.replace_absolute_path=true
cloudstorage.relative_path_prefix= "CONTENT_STORAGE_BASE_PATH"
cloudstorage.read_base_path=${?CLOUD_STORAGE_READ_BASE_PATH}
cloudstorage.write_base_path=${?CLOUD_STORAGE_WRITE_BASE_PATH}
cloudstorage.metadata.list=["appIcon","posterImage","artifactUrl","downloadUrl","variants","previewUrl","pdfUrl", "streamingUrl", "toc_url"]
cloud_storage_type=${?CLOUD_STORAGE_TYPE}
cloud_storage_key=${?CLOUD_STORAGE_KEY}
cloud_storage_secret=${?CLOUD_STORAGE_SECRET}
cloud_storage_container=${?CLOUD_STORAGE_CONTAINER}

content_youtube_apikey=${?CONTENT_YOUTUBE_API_KEY}